<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="539px" preserveAspectRatio="none" style="width:794px;height:539px;" version="1.1" viewBox="0 0 794 539" width="794px" zoomAndPan="magnify"><defs><filter height="300%" id="faegbhssflq1b" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="524.1797" style="stroke: #A80036; stroke-width: 1.0;" width="149" x="627" y="4"/><rect fill="#FFFFFF" filter="url(#faegbhssflq1b)" height="146.4438" style="stroke: #000000; stroke-width: 2.0;" width="701" x="81" y="326.6372"/><rect fill="#FFFFFF" height="100.5464" style="stroke: none; stroke-width: 1.0;" width="701" x="81" y="372.5347"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="134" x2="134" y1="43.0986" y2="403.4834"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="134" x2="134" y1="403.4834" y2="444.1323"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="134" x2="134" y1="444.1323" y2="490.0811"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388" x2="388" y1="43.0986" y2="403.4834"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="388" x2="388" y1="403.4834" y2="444.1323"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388" x2="388" y1="444.1323" y2="490.0811"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="548" x2="548" y1="43.0986" y2="403.4834"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="548" x2="548" y1="403.4834" y2="444.1323"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="548" x2="548" y1="444.1323" y2="490.0811"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="701" x2="701" y1="43.0986" y2="403.4834"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="701" x2="701" y1="403.4834" y2="444.1323"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="701" x2="701" y1="444.1323" y2="490.0811"/><rect fill="#FEFECE" filter="url(#faegbhssflq1b)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="91" y="8"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="98" y="28.3608">Application</text><rect fill="#FEFECE" filter="url(#faegbhssflq1b)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="91" y="489.0811"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="98" y="509.4419">Application</text><rect fill="#FEFECE" filter="url(#faegbhssflq1b)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="149" x="312" y="8"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="135" x="319" y="28.3608">Configuration module</text><rect fill="#FEFECE" filter="url(#faegbhssflq1b)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="149" x="312" y="489.0811"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="135" x="319" y="509.4419">Configuration module</text><rect fill="#FEFECE" filter="url(#faegbhssflq1b)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="475" y="8"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="482" y="28.3608">Simple OnOff server</text><rect fill="#FEFECE" filter="url(#faegbhssflq1b)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="475" y="489.0811"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="482" y="509.4419">Simple OnOff server</text><rect fill="#FEFECE" filter="url(#faegbhssflq1b)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="631" y="8"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="638" y="28.3608">Mesh core modules</text><rect fill="#FEFECE" filter="url(#faegbhssflq1b)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="631" y="489.0811"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="638" y="509.4419">Mesh core modules</text><polygon fill="#FBFB77" filter="url(#faegbhssflq1b)" points="8,58.0986,8,97.0986,258,97.0986,258,68.0986,248,58.0986,8,58.0986" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="248" x2="248" y1="58.0986" y2="68.0986"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="258" x2="248" y1="68.0986" y2="68.0986"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="14" y="75.5051">config_params defines OOB information</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="18" y="90.4539">and event callbacks</text><polygon fill="#A80036" points="376.5,122.9961,386.5,126.9961,376.5,130.9961,380.5,126.9961" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="134.5" x2="382.5" y1="126.9961" y2="126.9961"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="230" x="141.5" y="123.4026">nrf_mesh_node_config(&amp;config_params)</text><polygon fill="#FBFB77" filter="url(#faegbhssflq1b)" points="273,140.9448,273,164.9448,499,164.9448,499,150.9448,489,140.9448,273,140.9448" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="489" x2="489" y1="140.9448" y2="150.9448"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="499" x2="489" y1="150.9448" y2="150.9448"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="279" y="158.3513">Initializes core mesh and softdevice</text><polygon fill="#A80036" points="689.5,190.8936,699.5,194.8936,689.5,198.8936,693.5,194.8936" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388.5" x2="695.5" y1="194.8936" y2="194.8936"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="395.5" y="191.3">dsm_init()</text><polygon fill="#A80036" points="689.5,219.8423,699.5,223.8423,689.5,227.8423,693.5,223.8423" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388.5" x2="695.5" y1="223.8423" y2="223.8423"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="395.5" y="220.2488">access_init()</text><polygon fill="#A80036" points="689.5,248.791,699.5,252.791,689.5,256.791,693.5,252.791" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388.5" x2="695.5" y1="252.791" y2="252.791"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="395.5" y="249.1975">config_server_init()</text><polygon fill="#A80036" points="145.5,277.7397,135.5,281.7397,145.5,285.7397,141.5,281.7397" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="139.5" x2="387.5" y1="281.7397" y2="281.7397"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="151.5" y="278.1462">setup_callback()</text><polygon fill="#A80036" points="536,306.6885,546,310.6885,536,314.6885,540,310.6885" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="134.5" x2="542" y1="310.6885" y2="310.6885"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="141.5" y="307.095">simple_on_off_server_init(...)</text><rect fill="none" height="146.4438" style="stroke: #000000; stroke-width: 2.0;" width="701" x="81" y="326.6372"/><polygon fill="#EEEEEE" points="81,326.6372,142,326.6372,142,332.6372,132,342.6372,81,342.6372,81,326.6372" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="96" y="340.0437">alt</text><text fill="#000000" font-family="Arial" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="157" y="339.135">[Configuration stored in flash]</text><polygon fill="#A80036" points="145.5,359.5859,135.5,363.5859,145.5,367.5859,141.5,363.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="139.5" x2="387.5" y1="363.5859" y2="363.5859"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="151.5" y="359.9924">complete_callback()</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="81" x2="782" y1="373.5347" y2="373.5347"/><polygon fill="#A80036" points="689.5,390.5347,699.5,394.5347,689.5,398.5347,693.5,394.5347" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="388.5" x2="695.5" y1="394.5347" y2="394.5347"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="395.5" y="390.9412">Start provisioning</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="157" x="339.5" y="427.9812">Wait for provisioning to complete</text><polygon fill="#A80036" points="145.5,460.1323,135.5,464.1323,145.5,468.1323,141.5,464.1323" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="139.5" x2="387.5" y1="464.1323" y2="464.1323"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="151.5" y="460.5388">complete_callback()</text><!--
@startuml
skinparam defaultFontName Arial
participant a as "Application"
participant c as "Configuration module"
participant s as "Simple OnOff server"
box
participant core as "Mesh core modules"
end box

note over a: config_params defines OOB information\n and event callbacks
a -> c: nrf_mesh_node_config(&config_params)

note over c: Initializes core mesh and softdevice
c -> core: dsm_init()
c -> core: access_init()
c -> core: config_server_init()
c -> a: setup_callback()
a -> s: simple_on_off_server_init(...)

alt Configuration stored in flash
    c -> a: complete_callback()
else
    c -> core: Start provisioning
    ... Wait for provisioning to complete ...
    c -> a: complete_callback()
end

@enduml

PlantUML version 1.2017.16(Sun Sep 03 12:53:37 CEST 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Java Version: 1.8.0_144-b01
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: en
Country: GB
--></g></svg>